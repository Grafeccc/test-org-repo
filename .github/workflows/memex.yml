name: Add PR to project
on:
  pull_request:
    types:
      - ready_for_review
jobs:
  add_pr:
    runs-on: ubuntu-latest
    steps:
      # - name: print context
      #   env:
      #     GITHUB_CONTEXT: ${{ toJSON(github) }}
      #   run: echo "$GITHUB_CONTEXT"

      - name: Add PR to project
        uses: octokit/graphql-action@v2.2.20
        with:
          query: |
            mutation($pr_node_id:ID!) {
              addProjectNextItem(input: {projectId: "MDExOlByb2plY3ROZXh0MTU0OA==", contentId: $pr_node_id}) {
                projectNextItem {
                  id
                }
              }
            }
          pr_node_id: ${{ github.event.pull_request.node_id }}
          headers: 'GraphQL-Features: projects_next_graphql'
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
